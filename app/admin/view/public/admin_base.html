<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    {block name='title'}
    <title>{$websiteSets['name']}</title>
    {/block}
    {block name='keywords'}
    <meta name="keywords" content="{$websiteSets['keywords']}">
    {/block}
    {block name='description'}
    <meta name="description" content="{$websiteSets['description']}">
    {/block}

    <link rel="shortcut icon" href="{if !empty($websiteSets['logo'])}{:tomedia($websiteSets['logo'])}{else}favicon.ico{/if}">

    <link rel="stylesheet" href="__ADMIN_COMPONENT__/bootstrap/bootstrap.min.css">

    <link href="__ADMIN_FONTS__/awesome/font-awesome.min.css?v=3.2.1" rel="stylesheet">
    <link href="__ADMIN_COMPONENT__/animate/animate.css" rel="stylesheet">

    <!--商城icon 后期将作废-->
    <link rel="stylesheet" type="text/css" href="__ADMIN_FONTS__/shop/iconfont.css?v=20170503">
    <script src="__ADMIN_FONTS__/shop/iconfont.js"></script>

    <!--原始样式-->
    <link rel="stylesheet" href="__ADMIN_CSS__/upload.css">
    <link rel="stylesheet" href="__ADMIN_CSS__/common.css">

    <!--后台装修-->
    <link href="__ADMIN_CSS__/admin.css?v=4.1.0" rel="stylesheet">

    <script>var require = {urlArgs: 'v=20211031'};</script>

    <script type="text/javascript">
        if (navigator.appName === 'Microsoft Internet Explorer') {
            if (navigator.userAgent.indexOf("MSIE 5.0") > 0 || navigator.userAgent.indexOf("MSIE 6.0") > 0 || navigator.userAgent.indexOf("MSIE 7.0") > 0) {
                alert('您使用的 IE 浏览器版本过低, 推荐使用 Chrome 浏览器或 IE8 及以上版本浏览器.');
            }
        }

        window.sysinfo = {
            'uniacid': '{$uniacid}',
            'uid': '{$uid}',
            'siteroot': '{$siteRoot}',
            'siteurl': '{$iaRoot}',
            'attachurl': '{$attachUrl}',
            'module': '{$module}',
        };
    </script>

    <script type="text/javascript" src="__ADMIN_COMPONENT__/jquery/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="__ADMIN_COMPONENT__/bootstrap/bootstrap.min.js"></script>

    <script type="text/javascript" src="__ADMIN_JS__/web/util.js"></script>
    <script type="text/javascript" src="__ADMIN_JS__/web/common.min.js"></script>
    <script type="text/javascript" src="__ADMIN_JS__/require.js"></script>
    <script src="__ADMIN_JS__/config.js"></script>

    <script>
        require(['jquery', 'jquery.gcjs', 'init']);

        // 加载tip提示组件
        require(['tip'], function () {
            // tip.msgbox.suc("登录成功");
            // tip.confirm("登录成功");
            // util.message("验证错误", '', 'error')
            // util.message("验证正确", '', 'success')
        });
    </script>
</head>
<style>
    .wb-container {
        margin: 0 0 0 130px;
    }

    .wb-nav ~ .wb-subnav ~ .wb-container {
        margin-right: 0;
    }

    .wb-header .dropdown-menu > li {
        width: 100%;
    }

    .wb-header ul li.dropdown.ellipsis {
        min-width: 230px;
    }
</style>
<style type="text/css">
    .table > thead > tr > td.full, .table > tbody > tr > td.full, .table > tfoot > tr > td.full {
        overflow: hidden;
    }

    tbody tr td {
        position: relative;
    }

    tbody tr .icow-weibiaoti-- {
        visibility: hidden;
        display: inline-block;
        color: #fff;
        height: 18px;
        width: 18px;
        background: #e0e0e0;
        text-align: center;
        line-height: 18px;
        vertical-align: middle;
    }

    tbody tr:hover .icow-weibiaoti-- {
        visibility: visible;
    }

    tbody tr .icow-weibiaoti--.hidden {
        visibility: hidden !important;
    }
</style>
{block name='style'}{/block}
<!-- 结 构 代 码 -->
<body>

{block name='header'}{/block}
{block name='menus'}{/block}

<div class="wb-container">
    {if in_array($userInfo['role'],['owner','manager'])}
        {if !$isSystem && !empty($selSystemNav)}
            <div class="page-content" id="iframePage" style="height: 700px;">
                <iframe src="{:url('admin/system/index')}" style="position: absolute; display: block; border: 0; top: 0; left: 0; width: 100%; height: 100%;"></iframe>
            </div>
        {else}
            <div style="padding: 0 20px 30px 20px;box-sizing: border-box;">
                {block name='content'}{/block}
            </div>
        {/if}
    {else}
    <div style="padding: 0 20px 30px 20px;box-sizing: border-box;">
        {block name='content'}{/block}
    </div>
    {/if}

    <div id="page-loading">
        <div class="page-loading-inner">
            <div class="sk-three-bounce">
                <div class="sk-child sk-bounce1"></div>
                <div class="sk-child sk-bounce2"></div>
                <div class="sk-child sk-bounce3"></div>
            </div>
        </div>
    </div>

    {block name='copyright'}{/block}
</div>

<div class="modal fade" id="public_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div>

<script>
    // 计算页面高度
    let iframePage = document.getElementById('iframePage');
    if (iframePage) {
        let windowHeight = document.body.clientHeight;
        iframePage.style.height = (windowHeight - 145) + 'px';
    }
</script>

<script language='javascript'>
    // 适当的post表单页面进行引用
    require(['bootstrap'], function ($) {
        // 这里开启会与common.min.js冲突 主要就是将提示框放在最外层，避免提示框被遮盖问题
        // $('[data-toggle="tooltip"]').tooltip("destroy").tooltip({
        //     container: $(document.body)
        // });

        $('[data-toggle="popover"]').popover("destroy").popover({
            container: $(document.body)
        });

        // tab切换
        $('#myTab a').click(function (e) {
            $('#tab').val($(this).attr('href'));
            e.preventDefault();
            $(this).tab('show');
        });
        // 鼠标选中弹出信息框
        $("[rel=pop]").popover({
            trigger: 'manual',
            placement: 'right',
            title: $(this).data('title'),
            html: 'true',
            content: $(this).data('content'),
            animation: false
        }).on("mouseenter", function () {
            var _this = this;
            $(this).popover("show");
            $(this).siblings(".popover").on("mouseleave", function () {
                $(_this).popover('hide');
            });
        }).on("mouseleave", function () {
            var _this = this;
            setTimeout(function () {
                if (!$(".popover:hover").length) {
                    $(_this).popover("hide")
                }
            }, 100);
        });
    });
</script>

<script language="javascript">
    if ($('form.form-validate').length <= 0) {
        window.formInited = true;
    }

    window.formInitTimer = setInterval(function () {
        if (typeof (window.formInited) !== 'undefined') {
            $('#page-loading').remove();
            clearInterval(window.formInitTimer);
        }
    }, 1);
</script>

<!--低分辨率一级导航显示不全问题 start-->
<script>
    var navheight = document.getElementById('navheight');
    var navwidth = document.getElementById('navwidth');
    var vh = document.body.clientHeight;
    var vw = screen.width;

    if (navheight) {
        if (vh < 800) {
            navheight.classList.add("wb-navheight");
        } else {
            navheight.classList.remove("wb-navheight");
        }

        if (vw < 1300) {
            navwidth.classList.add("wb-navwidth");
        }
    }
</script>

<!--低分辨率一级导航显示不全问题 end-->

<script>
    // 模态框
    function ajaxModel(obj) {
        var url = $(obj).data('url');
        // console.log(url);
        $.get(url, {}, function (html) {
            $("#public_modal").html(html).modal('show');
        });
    }
</script>
{block name='script'}{/block}

</body>

</html>